<?xml version="1.0" encoding="UTF-8"?>
<!-- 
    AKTIN-Projekt
    
    Beispiel Storyboard 1: Einfache Distorsionsverletzung, unfallchirurgisch
    Storyboard aktin-1
    2015-04-09
    
    Timo Kicker, geboren am 31.05.1996 in Dankbor, wohnhaft München, stellt sich am 17. Januar 2015 um 16:03 Uhr 
    in der Notaufnahme des Krankenhauses selbst vor. Er hat beim Training des Fußballvereins mit dem linken Fuß 
    ein Distorsionstrauma erlitten und wird von seinem Vereinskollegen humpelnd in die Notaufnahme gebracht. 
    In der Notaufnahme wird kein Ersteinschätzungssystem eingesetzt. Als Leitsymptom wird die Verletzung der 
    unteren Extremität mit CEDIS-Code 557 erhoben.
    
    Die vom Unfallchirurgen um 16:32 Uhr erhobene Anamnese ergibt keine weiteren Vorerkrankungen, keine Allergien 
    und keine regelmäßigen Medikamenteneinnahmen. Es werden in Anbetracht der Verletzungsschwere keine Vitalparameter
    wie Atemfrequenz, Herzfrequenz oder Blutdruck erhoben. An Diagnostik wird eine Röntgenuntersuchung des
    Sprunggelenks durchgeführt um 16:50 Uhr durchgeführt. Nach erfolgtem Ausschluss einer Fraktur wird um
    17:14 als Therapie eine Sprunggelenkorthese angelegt und der Patient um 17:35 in die hausärztliche Versorgung
    entlassen. Als Entlassungsdiagnose wird die S93.6 „Distorsion unteres Sprunggelenk“ gestellt.
    
    ERGÄNZUNG:
    Datensatz aufgefüllt mit unrealistischen Testdaten; vollständiger Basis-Modul-Datensatz
    Reihenfolge z.T. gerändert, so dass die Elemente in der Reihenfolge aufreten wie sie im Template beschrieben sind
    
-->
<?xml-model href="../../aktin-runtime-develop/aktin-basism.sch" type="application/xml" schematypens="http://purl.oclc.org/dsdl/schematron"?>
<ClinicalDocument xmlns="urn:hl7-org:v3" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:sdtc="urn:hl7-org:sdtc" xsi:schemaLocation="urn:hl7-org:v3 CDA.xsd">
    <!--
        CDA Header
    -->
    <!-- Realmcode (fix) -->
    <realmCode code="DE"/>
    <!-- Type Id (fix) -->
    <typeId root="2.16.840.1.113883.1.3" extension="POCD_HD000040"/>
    <!-- Template Id (fix) -->
    <templateId root="1.2.276.0.76.10.1015"/>
    <!-- Identifikation des Dokuments -->
    <id root="1.2.276.0.76.4.17.9814184919" extension="14025fda-3f25-4c64-8883-4f7e6cabc0b6"/>
    <!-- Fixer Dokumententype-Code -->
    <code code="34878-9" codeSystem="2.16.840.1.113883.6.1" codeSystemName="LOINC" displayName="Emergency medicine Note"/>
    <!-- &Complete CDAtitle &Frage Wozu braucht man den CDAtitle?/Was sollte drin stehen? -->
    <title>CDATitle</title>
    <!-- Datum und Zeit der Erstellung -->
    <effectiveTime value="20150117163300"/>
    <!-- Vertraulichkeitsstufe -->
    <confidentialityCode code="N" codeSystem="2.16.840.1.113883.5.25"/>
    <!-- Sprache und Länderkennung -->
    <languageCode code="de-DE"/>
    <!-- Set-ID und Versionsnummer des Dokuments -->
    <setId root="1.2.276.0.76.4.17.9814184919" extension="0ff0f2d6-ddc2-4300-a5e6-b0aecd1a7dcf"/>
    <versionNumber value="1"/>
    
    <!-- Patient -->
    <recordTarget typeCode="RCT" contextControlCode="OP">
        <patientRole classCode="PAT">
            <!-- Identifikation -->
            <id extension="1234567890" root="1.2.276.0.76.4.8"/>
            <!-- Adresse -->
            <!-- &Complete &Frage HL7-Adressfelder können sehr unterschiedlich aussehen, dies ist ein Beispiel aus der Dokumentation -->
           <addr use="WP">
                <houseNumber>1050</houseNumber>
                <direction>W</direction>
                <streetName>Wishard Blvd</streetName>
                <additionalLocator>RG 5th floor</additionalLocator>
                <city>Indianapolis</city>
                <state>IN</state>
                <postalCode>46240</postalCode>
            </addr>
            <!-- &Complete &Frage HL7-telecom-Felder können sehr unterschiedlich aussehen, dies ist ein Beispiel aus der Dokumentation -->
            <telecom use="H" value="tel:+43.1.40400"/>
            <telecom use="MC" value="tel:+43.664.1234567"/>
            <telecom value="mailto:herberthannes.mustermann@provider.de"/>
            <patient classCode="PSN" determinerCode="INSTANCE">
                <!-- Name -->
                <!-- &Frage Welche Elemente kann Name noch zusätzlich haben? NAme ist "1..* REQ" - macht eigentlich keinen Sinn, da Birthtime und Gender ja einfach sind und der Datentyp Name selbst schon Unterelemente hat-->
                <name>
                    <given>Timo</given>
                    <family>Kicker</family>
                </name>
                <!-- Geschlecht -->
                <administrativeGenderCode code="M" codeSystem="2.16.840.1.113883.5.1"/>
                <!-- Geburtsdatum -->
                <birthTime value="19960531"/>
            </patient>
        </patientRole>
    </recordTarget>
    
    <!-- Author -->
    <author typeCode="AUT" contextControlCode="OP">
        <time value="20150117160900"/>
        <assignedAuthor classCode="ASSIGNED">
            <id root="1.2.276.0.76.3.2.123456789"/>
            <assignedPerson classCode="PSN" determinerCode="INSTANCE">
                <name>
                    <prefix>Dr. med. </prefix>
                    <given>Martin</given>
                    <family>Regensburger</family>
                </name>
            </assignedPerson>
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
                <id root="1.2.276.0.76.4.17" extension="9814184919"/>
                <name>Städtisches Klinikum München GmbH</name>
            </representedOrganization>
        </assignedAuthor>
    <!-- &Complete Zweiten Autor eingefügt -->
    </author>
        <author typeCode="AUT" contextControlCode="OP">
        <time value="20150131145900"/>
        <assignedAuthor classCode="ASSIGNED">
            <id root="1.2.276.0.76.3.2.234567891"/>
            <assignedPerson classCode="PSN" determinerCode="INSTANCE">
                <name>                 
                    <given>Max</given>
                    <family>Mustermann</family>
                </name>
            </assignedPerson>
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
                <id root="1.2.276.0.76.4.17" extension="9814184919"/>
                <!-- &Complete Zweite ID eingefügt -->
                <id root="1.2.276.0.76.4.17" extension="9814184920"/>
                <name>Städtisches Klinikum München GmbH</name>
                <!-- &Complete telecom 2x eingefügt -->
                <telecom use="H" value="tel:+43.1.40400"/>
                <telecom use="MC" value="tel:+43.664.1234567"/>
                <!-- &Complete addr eingefügt -->
                <addr use="WP">
                    <streetName>Wishard Blvd</streetName>
                    <city>Indianapolis</city>
                    <postalCode>46240</postalCode>
                </addr>
            </representedOrganization>
        </assignedAuthor>
    </author>
    
    <!-- Verwaltungsorganisation des Dokuments -->
    <custodian>
        <assignedCustodian>
            <representedCustodianOrganization>
                <id root="1.2.276.0.76.4.17" extension="9814184919"/>
                <!-- &Complete Zweite ID eingefügt -->
                <id root="1.2.276.0.76.4.17" extension="9814184920"/>
                <name>Städtisches Klinikum München GmbH</name>
                <!-- &Complete telecom 2x eingefügt -->
                <telecom use="H" value="tel:+43.1.40400"/>
                <telecom use="MC" value="tel:+43.664.1234567"/>
                <!-- &Complete addr eingefügt -->
                <addr use="WP">
                    <streetName>Wishard Blvd</streetName>
                    <city>Indianapolis</city>
                    <postalCode>46240</postalCode>
                </addr>
            </representedCustodianOrganization>
        </assignedCustodian>
    </custodian>
    
    <!-- Aufnahme -->
    <documentationOf typeCode="DOC">
        <serviceEvent classCode="ACT" moodCode="EVN">
            <!-- Behandlung -->
            <effectiveTime>
                <!-- Start der Behandlung (Datum und Zeit), Zeitangabe genau bis auf die Minute -->
                <low value="20150117160300"/>
                <!-- Verlegungs-/Entlassungszeitpunkt (Datum und Zeit), Zeitangabe genau bis auf die Minute-->
                <high value="20150117173500"/>
            </effectiveTime>
            <performer typeCode="PRF">
                <!-- Erster Arzt, Arztkontakt Beginn und Ende -->
                <time>
                    <!-- Begin des Arztkontaktes -->
                    <low value="201501171632"/>
                    <!-- Ende des Arztkontaktes -->
                    <high value="201501171714"/>
                </time>
                <assignedEntity classCode="ASSIGNED">
                    <id nullFlavor="NA"/>
                </assignedEntity>
            </performer>
        </serviceEvent>
    </documentationOf>
    
    <!-- Patientenkontakt -->
    <componentOf>
        <encompassingEncounter classCode="ENC" moodCode="EVN">
            <effectiveTime>
                <!-- Start Patientenkontakt -->
                <low value="201501171603"/>
                <!-- Ende Patientenkontakt = Zeitpunkt der Verlegung/Entlassung -->
                <high value="201501171735"/>
            </effectiveTime>
            <!-- Entlassung des Patienten mit Entlassungsgrund -->
            <dischargeDispositionCode code="306689006" codeSystem="2.16.840.1.113883.6.96"/>
        </encompassingEncounter>
    </componentOf>
    
    <!-- &Frage  Struktur "choice merkwürdig, entspricht nicht dem Beispiel für informationRecipient aus dem HL7-Wiki    -->
    <informationRecipient typeCode="PRCP">
        <intendedRecipient>
            <id extension="4736437" root="2.16.840.1.113883.3.933"/>
                <informationRecipient>
                    <name>
                        <prefix>Dr.med.</prefix>
                        <given>Kai</given>
                        <family>Heitmann</family>
                    </name>
                </informationRecipient>
                <receivedOrganization>
                    <!-- #CHANGES Name nicht im Beispiel enthalten aber notwendig -->
                    <name>Städtisches Klinikum München GmbH</name>
                    <telecom use="WP" value="fax:0247365746"/>
                    <addr>
                        <streetAddress>Mühlenweg 1a</streetAddress>
                        <houseNumber>1a</houseNumber>
                        <postalCode>52152</postalCode>
                        <city>Simmerath</city>
                    </addr>
                </receivedOrganization>
        </intendedRecipient>
    </informationRecipient>
    
    <!--
        CDA Body
    -->
    <component>
        <structuredBody>

            <component typeCode="COMP" contextConductionInd="true">
                <!-- Transportmittel -->
                <section classCode="DOCSECT">
                    <templateId root="1.2.276.0.76.10.3045"/>
                    <code code="11459-5" codeSystem="2.16.840.1.113883.6.1" codeSystemName="LOINC" displayName="Transport mode"/>
                    <title>Transportmittel</title>
                    <text>Ohne</text>
                    <entry typeCode="COMP">
                        <observation classCode="OBS" moodCode="EVN">
                            <templateId root="1.2.276.0.76.10.4037"/>
                             <id root="45f99818-637b-4be7-bc22-a70442424242"/>
                             <!-- &Frage Ist das die OID für den u.g. Code oder wozu dient diese ID? -->
                            <code code="11459-5" codeSystem="2.16.840.1.113883.6.1" displayName="Transport method"/>
                            <text>
                                <reference value="#transp"/>
                            </text>
                             <!-- &Frage Aus dem HL7-Wiki "Lediglich reference in den Text der zugehörigen Section". Unklar, was damit gemeint ist--> 
                            <statusCode code="completed"/>
                            <!-- Optional: Ankunftszeit -->
                            <effectiveTime>
                                <high value="201501171603"/>
                            </effectiveTime>
                            <value xsi:type="CV" nullFlavor="NA"/>
                        </observation>
                    </entry>
                </section>
            </component>

            <!-- &Complete Component/Section Typeofreferralsource -->
            <component typeCode="COMP" contextConductionInd="true">
                <section classCode="DOCSECT">
                    <templateId root="1.2.276.0.76.10.3046"/>
                    <code code="11293-8" codeSystem="" codeSystemName="LOINC" displayName="Type of Referral source"/>
                    <title>Zuweisung</title>
                    <text>Rettungsdienst</text>
                    <entry typeCode="COMP" contextConductionInd="true">
                        <act classCode="PCPR" moodCode="RQO">
                            <templateId root="1.2.276.0.76.10.4038"/>
                            <code code="3457005" codeSystem="2.16.840.1.113883.6.96"/>
                            <text>
                                <reference value="#referral"/>
                            </text>
                            <participant typeCode="AUT">
                                <participantRole classCode="AGNT">
                                    <!-- &Frage unklar, wie das mit dem Value-Set und Code System genau funktioniert, geht aus dem HL7 Wiki und der ART-DECO-Doku nicht hervor-->
                                    <code code="700232004" valueSet="1.2.276.0.76.11.42"/>
                                </participantRole>
                            </participant>
                         </act>
                    </entry>
                 </section>
            </component>
        
        </structuredBody>
    </component>
</ClinicalDocument>
